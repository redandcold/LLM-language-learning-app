interface LanguageSettings {
  mainLanguage: string
  learningLanguage: string
}

interface PromptParams {
  assistantMessage: string
  languageSettings: LanguageSettings
}

export function generateGrammarPrompt({ assistantMessage, languageSettings }: PromptParams): string {
  return `ë‹¤ìŒ ë¬¸ì¥ì—ì„œ ì‚¬ìš©ëœ ë¬¸ë²•ì„ ë¶„ì„í•´ì£¼ì„¸ìš”:

"${assistantMessage}"

ë¶„ì„ ìš”ì²­:
1. ìœ„ ë¬¸ì¥ì—ì„œ ì‚¬ìš©ëœ ì£¼ìš” ë¬¸ë²• êµ¬ì¡°ë“¤ì„ ì‹ë³„í•˜ê³  ì„¤ëª…í•´ì£¼ì„¸ìš”
2. ê° ë¬¸ë²•ì— ëŒ€í•´ ë‹¤ë¥¸ ì˜ˆë¬¸ë„ 2-3ê°œì”© ë³´ì—¬ì£¼ì„¸ìš”
3. ì´ˆë³´ìë„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì‰½ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”

ì‘ë‹µ ì–¸ì–´: ${languageSettings.mainLanguage}
ëŒ€ìƒ ì–¸ì–´: ${languageSettings.learningLanguage}

ë‹¤ìŒê³¼ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”:

## ğŸ“š ë¬¸ë²• ë¶„ì„

### 1. [ë¬¸ë²• êµ¬ì¡° ì´ë¦„]
**ì„¤ëª…:** [ë¬¸ë²• ê·œì¹™ ì„¤ëª…]
**ì˜ˆë¬¸:**
- [ì˜ˆë¬¸ 1]
- [ì˜ˆë¬¸ 2]
- [ì˜ˆë¬¸ 3]

### 2. [ë¬¸ë²• êµ¬ì¡° ì´ë¦„]
**ì„¤ëª…:** [ë¬¸ë²• ê·œì¹™ ì„¤ëª…]
**ì˜ˆë¬¸:**
- [ì˜ˆë¬¸ 1]
- [ì˜ˆë¬¸ 2]
- [ì˜ˆë¬¸ 3]

## ğŸ’¡ í•™ìŠµ íŒ
[ë¬¸ë²• í•™ìŠµì— ë„ì›€ì´ ë˜ëŠ” ì¶”ê°€ íŒ]`
}

export function generateVocabularyPrompt({ assistantMessage, languageSettings }: PromptParams): string {
  return `ë‹¤ìŒ ë¬¸ì¥ì—ì„œ ì‚¬ìš©ëœ ë‹¨ì–´, ìˆ™ì–´, ì†ë‹´ì„ ë¶„ì„í•´ì£¼ì„¸ìš”:

"${assistantMessage}"

ë¶„ì„ ìš”ì²­:
1. ìœ„ ë¬¸ì¥ì— í¬í•¨ëœ ì¤‘ìš”í•œ ë‹¨ì–´ë“¤ì˜ ì˜ë¯¸ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”
2. ìˆ™ì–´ë‚˜ ê´€ìš©í‘œí˜„ì´ ìˆë‹¤ë©´ ê·¸ ì˜ë¯¸ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”
3. ì†ë‹´ì´ë‚˜ ê²©ì–¸ì´ ìˆë‹¤ë©´ ê·¸ ëœ»ê³¼ ìœ ë˜ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”
4. ê° ë‹¨ì–´/í‘œí˜„ë§ˆë‹¤ ë‹¤ë¥¸ ì˜ˆë¬¸ì„ 2-3ê°œì”© ì œê³µí•´ì£¼ì„¸ìš”

ì‘ë‹µ ì–¸ì–´: ${languageSettings.mainLanguage}
ëŒ€ìƒ ì–¸ì–´: ${languageSettings.learningLanguage}

ë‹¤ìŒê³¼ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”:

## ğŸ“– ë‹¨ì–´ ë° í‘œí˜„ ë¶„ì„

### ğŸ”¤ ë‹¨ì–´
**[ë‹¨ì–´]** - [ë°œìŒ] (í’ˆì‚¬)
- ì˜ë¯¸: [ë‹¨ì–´ì˜ ëœ»]
- ì˜ˆë¬¸:
  - [ì˜ˆë¬¸ 1]
  - [ì˜ˆë¬¸ 2]
  - [ì˜ˆë¬¸ 3]

### ğŸ­ ìˆ™ì–´/ê´€ìš©í‘œí˜„
**[ìˆ™ì–´]**
- ì˜ë¯¸: [ìˆ™ì–´ì˜ ëœ»]
- ì˜ˆë¬¸:
  - [ì˜ˆë¬¸ 1]
  - [ì˜ˆë¬¸ 2]
  - [ì˜ˆë¬¸ 3]

### ğŸ“œ ì†ë‹´/ê²©ì–¸
**[ì†ë‹´]**
- ì˜ë¯¸: [ì†ë‹´ì˜ ëœ»]
- ìœ ë˜: [ì†ë‹´ì˜ ìœ ë˜ë‚˜ ë°°ê²½]
- ì˜ˆë¬¸:
  - [ì˜ˆë¬¸ 1]
  - [ì˜ˆë¬¸ 2]

## ğŸ’¡ ì–´íœ˜ í•™ìŠµ íŒ
[ì–´íœ˜ í•™ìŠµì— ë„ì›€ì´ ë˜ëŠ” ì¶”ê°€ íŒ]`
}

export function generateBothPrompt({ assistantMessage, languageSettings }: PromptParams): string {
  return `ë‹¤ìŒ ë¬¸ì¥ì˜ ë¬¸ë²•ê³¼ ì–´íœ˜ë¥¼ ì¢…í•©ì ìœ¼ë¡œ ë¶„ì„í•´ì£¼ì„¸ìš”:

"${assistantMessage}"

ë¶„ì„ ìš”ì²­:
1. ë¬¸ë²• êµ¬ì¡° ë¶„ì„ ë° ì˜ˆë¬¸ ì œê³µ
2. ì¤‘ìš”í•œ ë‹¨ì–´, ìˆ™ì–´, ì†ë‹´ì˜ ì˜ë¯¸ ì„¤ëª… ë° ì˜ˆë¬¸ ì œê³µ
3. ë¬¸ë²•ê³¼ ì–´íœ˜ê°€ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ ì „ì²´ ì˜ë¯¸ë¥¼ ë§Œë“œëŠ”ì§€ ì„¤ëª…

ì‘ë‹µ ì–¸ì–´: ${languageSettings.mainLanguage}
ëŒ€ìƒ ì–¸ì–´: ${languageSettings.learningLanguage}

ë‹¤ìŒê³¼ ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”:

## ğŸ“š ë¬¸ë²• ë¶„ì„

### 1. [ë¬¸ë²• êµ¬ì¡° ì´ë¦„]
**ì„¤ëª…:** [ë¬¸ë²• ê·œì¹™ ì„¤ëª…]
**ì˜ˆë¬¸:**
- [ì˜ˆë¬¸ 1]
- [ì˜ˆë¬¸ 2]
- [ì˜ˆë¬¸ 3]

## ğŸ“– ë‹¨ì–´ ë° í‘œí˜„ ë¶„ì„

### ğŸ”¤ ì£¼ìš” ë‹¨ì–´
**[ë‹¨ì–´]** - [ë°œìŒ] (í’ˆì‚¬)
- ì˜ë¯¸: [ë‹¨ì–´ì˜ ëœ»]
- ì˜ˆë¬¸:
  - [ì˜ˆë¬¸ 1]
  - [ì˜ˆë¬¸ 2]
  - [ì˜ˆë¬¸ 3]

### ğŸ­ ìˆ™ì–´/ê´€ìš©í‘œí˜„
**[ìˆ™ì–´]**
- ì˜ë¯¸: [ìˆ™ì–´ì˜ ëœ»]
- ì˜ˆë¬¸:
  - [ì˜ˆë¬¸ 1]
  - [ì˜ˆë¬¸ 2]

### ğŸ“œ ì†ë‹´/ê²©ì–¸
**[ì†ë‹´]**
- ì˜ë¯¸: [ì†ë‹´ì˜ ëœ»]
- ìœ ë˜: [ì†ë‹´ì˜ ìœ ë˜ë‚˜ ë°°ê²½]

## ğŸ”— ë¬¸ë²•ê³¼ ì–´íœ˜ì˜ ì—°ê²°
[ë¬¸ë²• êµ¬ì¡°ì™€ ì–´íœ˜ê°€ ì–´ë–»ê²Œ ê²°í•©ë˜ì–´ ì „ì²´ ì˜ë¯¸ë¥¼ í˜•ì„±í•˜ëŠ”ì§€ì— ëŒ€í•œ ì„¤ëª…]

## ğŸ’¡ ì¢…í•© í•™ìŠµ íŒ
[ë¬¸ë²•ê³¼ ì–´íœ˜ë¥¼ í•¨ê»˜ í•™ìŠµí•  ë•Œ ë„ì›€ì´ ë˜ëŠ” íŒ]`
}

export function generateAnalysisPrompt(
  type: 'grammar' | 'vocabulary' | 'both',
  assistantMessage: string,
  languageSettings: LanguageSettings
): string {
  const params = { assistantMessage, languageSettings }
  
  switch (type) {
    case 'grammar':
      return generateGrammarPrompt(params)
    case 'vocabulary':
      return generateVocabularyPrompt(params)
    case 'both':
      return generateBothPrompt(params)
    default:
      throw new Error(`Unknown analysis type: ${type}`)
  }
}